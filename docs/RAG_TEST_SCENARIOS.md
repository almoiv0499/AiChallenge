# Сценарии тестирования RAG сравнения

## Быстрый старт

1. **Подготовка:**
   ```bash
   gradlew runIndexDocs
   gradlew run --console=plain
   ```

2. **Включение режима сравнения:**
   ```
   /rag-compare
   ```

3. **Задайте вопрос из списка ниже**

---

## Сценарий 1: Проверка базовой функциональности

### Цель
Проверить, что режим сравнения работает корректно.

### Шаги
1. Запустите приложение
2. Введите `/rag-compare`
3. Проверьте сообщение: "✅ Режим сравнения RAG включен"
4. Задайте вопрос: "Что такое MCP stdio transport?"
5. Проверьте вывод обоих ответов и анализа

### Ожидаемый результат
- ✅ Выводятся оба ответа (с RAG и без RAG)
- ✅ Выводится анализ различий
- ✅ RAG контекст найден (если документы проиндексированы)

---

## Сценарий 2: Проверка влияния RAG на релевантные вопросы

### Цель
Проверить, что RAG улучшает ответы на релевантные вопросы.

### Тестовые вопросы
1. "Что такое MCP stdio transport?"
2. "Как работает Android emulator agent?"
3. "Какие этапы разработки описаны в документации?"

### Ожидаемый результат
- ✅ RAG контекст найден для всех вопросов
- ✅ Ответы с RAG отличаются от ответов без RAG
- ✅ Схожесть ответов < 60%
- ✅ Анализ показывает, что RAG помог

---

## Сценарий 3: Проверка обработки нерелевантных вопросов

### Цель
Проверить, что система корректно обрабатывает вопросы без релевантного контекста.

### Тестовые вопросы
1. "Что такое искусственный интеллект?"
2. "Сколько будет 25 * 4?"
3. "Который сейчас час?"

### Ожидаемый результат
- ⚠️ RAG контекст не найден (или найден нерелевантный)
- ✅ Ответы очень похожи или идентичны
- ✅ Схожесть ответов > 80%
- ✅ Анализ показывает, что RAG не помог

---

## Сценарий 4: Переключение режимов

### Цель
Проверить переключение между режимами.

### Шаги
1. Введите `/rag-compare` - включить режим сравнения
2. Введите `/rag-compare` - выключить режим сравнения
3. Введите `/rag` - выключить RAG
4. Введите `/rag` - включить RAG обратно

### Ожидаемый результат
- ✅ Режимы переключаются корректно
- ✅ Сообщения о статусе отображаются правильно
- ✅ Поведение соответствует текущему режиму

---

## Сценарий 5: Проверка сохранения истории

### Цель
Проверить, что история разговора сохраняется корректно.

### Шаги
1. Задайте вопрос: "Что такое MCP?"
2. Включите режим сравнения: `/rag-compare`
3. Задайте вопрос: "Как работает Android эмулятор?"
4. Проверьте, что второй вопрос учитывает контекст первого

### Ожидаемый результат
- ✅ История сохраняется между запросами
- ✅ Контекст предыдущих сообщений учитывается
- ✅ После сравнения в историю добавляется ответ с RAG

---

## Сценарий 6: Проверка метрик анализа

### Цель
Проверить корректность расчета метрик.

### Шаги
1. Включите режим сравнения
2. Задайте вопрос с релевантным контекстом
3. Проверьте метрики:
   - Длина ответов
   - Количество слов
   - Схожесть ответов

### Ожидаемый результат
- ✅ Метрики рассчитываются корректно
- ✅ Выводы соответствуют метрикам
- ✅ Формулы расчета правильные

---

## Сценарий 7: Проверка обработки ошибок

### Цель
Проверить обработку граничных случаев и ошибок.

### Тестовые случаи
1. Пустой вопрос (просто Enter)
2. Очень длинный вопрос (500+ символов)
3. Вопрос на английском языке
4. Вопрос с специальными символами

### Ожидаемый результат
- ✅ Система не падает
- ✅ Корректные сообщения об ошибках
- ✅ Граничные случаи обрабатываются правильно

---

## Сценарий 8: Производительность

### Цель
Проверить производительность режима сравнения.

### Шаги
1. Задайте 10 вопросов подряд в режиме сравнения
2. Измерьте время ответа
3. Проверьте использование токенов

### Ожидаемый результат
- ✅ Время ответа примерно в 2 раза больше (два запроса)
- ✅ Использование токенов примерно в 2 раза больше
- ✅ Система не замедляется при множественных запросах

---

## Сценарий 9: Сравнение с разными типами вопросов

### Цель
Определить, для каких типов вопросов RAG наиболее полезен.

### Тестовые вопросы по категориям

**Технические вопросы:**
- "Что такое MCP stdio transport?"
- "Как работает Android emulator agent?"

**Вопросы о проекте:**
- "Какие этапы разработки описаны?"
- "Какие технологии используются?"

**Общие вопросы:**
- "Что такое искусственный интеллект?"
- "Как работает машинное обучение?"

### Ожидаемый результат
- ✅ RAG помогает для технических вопросов и вопросов о проекте
- ✅ RAG не помогает для общих вопросов
- ✅ Можно определить паттерны эффективности RAG

---

## Сценарий 10: Интеграция с другими функциями

### Цель
Проверить, что режим сравнения не конфликтует с другими функциями.

### Шаги
1. Включите режим сравнения
2. Используйте инструменты (например, калькулятор)
3. Используйте команды (/clear, /help)
4. Проверьте работу с историей

### Ожидаемый результат
- ✅ Режим сравнения не мешает другим функциям
- ✅ Инструменты работают корректно
- ✅ Команды работают как обычно

---

## Чек-лист для каждого сценария

Для каждого сценария проверьте:

- [ ] Команды выполняются без ошибок
- [ ] Вывод корректен и читаем
- [ ] Метрики рассчитываются правильно
- [ ] История сохраняется корректно
- [ ] Ошибки обрабатываются правильно
- [ ] Производительность приемлема

---

## Критерии успешного прохождения

### Обязательные критерии
- ✅ Все команды работают
- ✅ Режим сравнения включается/выключается
- ✅ Оба ответа выводятся
- ✅ Анализ выполняется без ошибок

### Желательные критерии
- ✅ RAG помогает в 70%+ релевантных вопросов
- ✅ Метрики точны и полезны
- ✅ UI понятен и информативен
- ✅ Производительность приемлема

---

## Шаблон отчета

```markdown
# Отчет о тестировании: [Название сценария]

Дата: [дата]
Тестировщик: [имя]

## Результаты
- [✅/❌] Сценарий пройден/не пройден

## Найденные проблемы
1. [описание]

## Рекомендации
1. [рекомендация]
```




