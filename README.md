# OpenRouter Agent

AI-ะฐะณะตะฝั ะฝะฐ Kotlin ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ [OpenRouter API](https://openrouter.ai/docs/api/api-reference/responses/create-responses).

## ะคัะฝะบัะธะธ ะฐะณะตะฝัะฐ

- **get_current_time** - ะฟะพะปััะตะฝะธะต ัะตะบััะตะณะพ ะฒัะตะผะตะฝะธ
- **calculator** - ะผะฐัะตะผะฐัะธัะตัะบะธะต ะฒััะธัะปะตะฝะธั (add, subtract, multiply, divide, power, sqrt)
- **search** - ะฟะพะธัะบ ะธะฝัะพัะผะฐัะธะธ (ัะผัะปััะธั)
- **random_number** - ะณะตะฝะตัะฐัะธั ัะปััะฐะนะฝะพะณะพ ัะธัะปะฐ ะฒ ะทะฐะดะฐะฝะฝะพะผ ะดะธะฐะฟะฐะทะพะฝะต

## ะขัะตะฑะพะฒะฐะฝะธั

- JDK 17+
- Gradle (ะฒะบะปัััะฝ ะฒ ะฟัะพะตะบั ะบะฐะบ wrapper)
- API ะบะปัั OpenRouter

## ะะฐัััะพะนะบะฐ

### 1. ะะพะปััะธัะต API ะบะปัั

ะะฐัะตะณะธัััะธััะนัะตัั ะฝะฐ [OpenRouter](https://openrouter.ai/) ะธ ะฟะพะปััะธัะต API ะบะปัั.

### 2. ะฃััะฐะฝะพะฒะธัะต ะบะปัั

ะกะพะทะดะฐะนัะต ัะฐะนะป `local.properties` ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ:

```properties
OPENROUTER_API_KEY=sk-or-v1-ะฒะฐั_ะบะปัั
```

ะะปะธ ัััะฐะฝะพะฒะธัะต ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั:

```bash
# Windows
set OPENROUTER_API_KEY=sk-or-v1-ะฒะฐั_ะบะปัั

# Linux/macOS
export OPENROUTER_API_KEY=sk-or-v1-ะฒะฐั_ะบะปัั
```

## ะะฐะฟััะบ

```bash
# Windows
gradlew.bat run --console=plain

# Linux/macOS  
./gradlew run --console=plain
```

## ะัะฟะพะปัะทะพะฒะฐะฝะธะต

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         ๐ค OpenRouter Agent - ะขะตัะผะธะฝะฐะปัะฝัะน ัะฐั ๐ค            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ  ะะพะผะฐะฝะดั:                                                    โ
โ    /exit            - ะฒััะพะด ะธะท ะฟัะพะณัะฐะผะผั                     โ
โ    /clear           - ะพัะธััะธัั ะธััะพัะธั ัะฐะทะณะพะฒะพัะฐ             โ
โ    /help            - ะฟะพะบะฐะทะฐัั ัะฟัะฐะฒะบั                       โ
โ    /help <ะฒะพะฟัะพั>   - ะฟะพะธัะบ ะฒ ะดะพะบัะผะตะฝัะฐัะธะธ ะฟัะพะตะบัะฐ (RAG)     โ
โ    /tools           - ะฟะตัะตะบะปััะธัั ะพัะฟัะฐะฒะบั ะธะฝััััะผะตะฝัะพะฒ      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ  ๐ก ะัะธะผะตัั:                                                 โ
โ    /help ะบะฐะบ ะฝะฐัััะพะธัั ะฟัะพะตะบั?                               โ
โ    /help ะบะฐะบะธะต ะฟัะฐะฒะธะปะฐ ััะธะปั ะบะพะดะฐ?                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

- "ะกะบะพะปัะบะพ ะฑัะดะตั 25 * 4?"
- "ะะพัะพััะน ัะตะนัะฐั ัะฐั?"
- "ะกะณะตะฝะตัะธััะน ัะปััะฐะนะฝะพะต ัะธัะปะพ ะพั 1 ะดะพ 100"
- "ะะฐะนะดะธ ะธะฝัะพัะผะฐัะธั ะพ Kotlin"
- "ะะฐ ะบะฐะบะพะน ะฒะตัะบะต ั ัะตะนัะฐั?" - ะธัะฟะพะปัะทัะตั Git MCP ัะตัะฒะตั
- "ะะพะบะฐะถะธ ะฟะพัะปะตะดะฝะธะต ะบะพะผะผะธัั"
- "ะะฐะบะฐั ะฟะพะณะพะดะฐ ะฒ ะะพัะบะฒะต?"
- **"ะะฐะนะดะธ ะฝะฐ ััััะพะนััะฒะต: Kotlin programming"** - ะทะฐะฟัััะธั Android ัะผัะปััะพั ะธ ะฒัะฟะพะปะฝะธั ะฟะพะธัะบ

### ะะพะผะพัั ะฟะพ ะฟัะพะตะบัั (RAG)

ะะพะผะฐะฝะดะฐ `/help <ะฒะพะฟัะพั>` ะธัะฟะพะปัะทัะตั RAG (Retrieval-Augmented Generation) ะดะปั ะฟะพะธัะบะฐ ะพัะฒะตัะพะฒ ะฒ ะดะพะบัะผะตะฝัะฐัะธะธ ะฟัะพะตะบัะฐ:

```
/help ะบะฐะบ ะฝะฐัััะพะธัั MCP ัะตัะฒะตั?
/help ะบะฐะบะธะต ะฟัะฐะฒะธะปะฐ ะธะผะตะฝะพะฒะฐะฝะธั ะฒ Kotlin?
/help API ะดะปั ัะฐะฑะพัั ั Notion
/help ััะตะผะฐ ะฑะฐะทั ะดะฐะฝะฝัั
```

ะกะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ:
1. ะะตะฝะตัะธััะตั ัะผะฑะตะดะดะธะฝะณ ะฒะฐัะตะณะพ ะฒะพะฟัะพัะฐ
2. ะัะตั ัะตะปะตะฒะฐะฝัะฝัะต ััะฐะณะผะตะฝัั ะฒ ะฟัะพะธะฝะดะตะบัะธัะพะฒะฐะฝะฝะพะน ะดะพะบัะผะตะฝัะฐัะธะธ
3. ะะพะฑะฐะฒะปัะตั Git ะบะพะฝัะตะบัั (ัะตะบััะฐั ะฒะตัะบะฐ, ะธะทะผะตะฝะตะฝะฝัะต ัะฐะนะปั)
4. ะคะพัะผะธััะตั ะพัะฒะตั ะฝะฐ ะพัะฝะพะฒะต ะฝะฐะนะดะตะฝะฝะพะน ะธะฝัะพัะผะฐัะธะธ

## ะะฐัััะพะนะบะฐ Android ัะผัะปััะพัะฐ (ะพะฟัะธะพะฝะฐะปัะฝะพ)

ะะปั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ััะฝะบัะธะธ ะฟะพะธัะบะฐ ะฝะฐ Android ัะผัะปััะพัะต:

1. ะฃััะฐะฝะพะฒะธัะต Android SDK
2. ะกะพะทะดะฐะนัะต AVD (Android Virtual Device) ัะตัะตะท Android Studio
3. ะะพะฑะฐะฒััะต ะฒ `local.properties`:
   ```properties
   ANDROID_SDK_PATH=C:\Users\YourName\AppData\Local\Android\Sdk
   ```
   ะะปะธ ัะตัะตะท ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั:
   ```bash
   set ANDROID_SDK_PATH=C:\Users\YourName\AppData\Local\Android\Sdk
   ```

ะะพะดัะพะฑะฝะตะต ัะผ. `docs/TESTING_GUIDE.md`

## ะะพะฒัะต ะฒะพะทะผะพะถะฝะพััะธ

### RAG (Retrieval-Augmented Generation)
- ะะฒัะพะผะฐัะธัะตัะบะฐั ะธะฝะดะตะบัะฐัะธั ะดะพะบัะผะตะฝัะฐัะธะธ ะฟัะพะตะบัะฐ
- ะกะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ ะฟะพ README, API docs, ััะตะผะฐะผ ะดะฐะฝะฝัั
- ะะฝัะตะปะปะตะบััะฐะปัะฝัะต ะพัะฒะตัั ะฝะฐ ะพัะฝะพะฒะต ะดะพะบัะผะตะฝัะฐัะธะธ
- ะะพะผะฐะฝะดะฐ `/help <ะฒะพะฟัะพั>` ะดะปั ะฟะพะธัะบะฐ ะธะฝัะพัะผะฐัะธะธ

### Git Integration (MCP)
- ะะพะปััะตะฝะธะต ัะตะบััะตะน ะฒะตัะบะธ (`get_current_branch`)
- ะกัะฐััั ัะตะฟะพะทะธัะพัะธั (`get_git_status`)  
- ะกะฟะธัะพะบ ะธะทะผะตะฝะตะฝะฝัั ัะฐะนะปะพะฒ (`get_open_files`)
- ะััะพัะธั ะบะพะผะผะธัะพะฒ (`get_recent_commits`)
- Git ะบะพะฝัะตะบัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะดะพะฑะฐะฒะปัะตััั ะฒ RAG ะฟะพะธัะบ

### MCP stdio Transport (Stage 2)
- ะะพะดะดะตัะถะบะฐ stdio ััะฐะฝัะฟะพััะฐ ะดะปั MCP ะฟัะพัะพะบะพะปะฐ
- ะะตะฑะปะพะบะธััััะธะน I/O ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Kotlin Coroutines
- ะะพะฝัะธะณััะธััะตะผัะน ะฒัะฑะพั ััะฐะฝัะฟะพััะฐ (HTTP/stdio)

### Android Emulator Agent (Stage 3)
- ะะฒัะพะผะฐัะธัะตัะบะธะน ะทะฐะฟััะบ Android ัะผัะปััะพัะฐ
- ะะพะธัะบ ะฝะฐ ััััะพะนััะฒะต ัะตัะตะท Chrome ะฑัะฐัะทะตั
- ะะฟัะตะดะตะปะตะฝะธะต ะฝะฐะผะตัะตะฝะธะน ะฟะพะปัะทะพะฒะฐัะตะปั ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
src/main/kotlin/org/example/
โโโ Main.kt                         # ะขะพัะบะฐ ะฒัะพะดะฐ
โโโ config/
โ   โโโ AppConfig.kt               # ะะฐะณััะทะบะฐ ะบะพะฝัะธะณััะฐัะธะธ
โ   โโโ OpenRouterConfig.kt        # ะะพะฝััะฐะฝัั API
โโโ ui/
โ   โโโ ConsoleUI.kt               # ะขะตัะผะธะฝะฐะปัะฝัะน ะธะฝัะตััะตะนั
โโโ agent/
โ   โโโ OpenRouterAgent.kt         # AI ะฐะณะตะฝั ั tool calling
โ   โโโ android/                   # Android ัะผัะปััะพั ะฐะณะตะฝั
โ       โโโ DeviceSearchExecutor.kt
โ       โโโ AdbCommandExecutor.kt
โ       โโโ AndroidEmulatorController.kt
โ       โโโ DeviceSearchService.kt
โโโ client/
โ   โโโ OpenRouterClient.kt        # HTTP ะบะปะธะตะฝั
โโโ mcp/
โ   โโโ McpClient.kt              # MCP ะบะปะธะตะฝั
โ   โโโ McpModels.kt              # MCP ะผะพะดะตะปะธ
โ   โโโ transport/                # ะขัะฐะฝัะฟะพััั MCP
โ   โ   โโโ Transport.kt
โ   โ   โโโ HttpTransport.kt
โ   โ   โโโ StdioTransport.kt
โ   โโโ server/                    # MCP ัะตัะฒะตัั
โ       โโโ NotionMcpServer.kt
โ       โโโ WeatherMcpServer.kt
โ       โโโ StdioMcpServer.kt
โโโ models/
โ   โโโ OpenRouterModels.kt        # ะะพะดะตะปะธ API
โ   โโโ Models.kt                  # ะะฑัะธะต ะผะพะดะตะปะธ
โโโ tools/
    โโโ OpenRouterTools.kt         # ะะฝััััะผะตะฝัั ะฐะณะตะฝัะฐ
```

## ะะพะบัะผะตะฝัะฐัะธั

### ะะฝัััะตะฝะฝัั ะดะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ
- [API Reference](docs/API_REFERENCE.md) - ัะฟัะฐะฒะพัะฝะธะบ ะฟะพ API ะบะพะผะฟะพะฝะตะฝัะพะฒ
- [Style Guide](docs/STYLE_GUIDE.md) - ััะบะพะฒะพะดััะฒะพ ะฟะพ ััะธะปั ะบะพะดะฐ Kotlin
- [Data Schema](docs/DATA_SCHEMA.md) - ััะตะผั ะดะฐะฝะฝัั ะธ ะผะพะดะตะปะธ
- [RAG Integration](docs/RAG_INTEGRATION.md) - ะธะฝัะตะณัะฐัะธั RAG
- [Testing Guide](docs/TESTING_GUIDE.md) - ััะบะพะฒะพะดััะฒะพ ะฟะพ ัะตััะธัะพะฒะฐะฝะธั

### ะะฝะตัะฝะธะต ัะตััััั
- [OpenRouter API Documentation](https://openrouter.ai/docs/api/api-reference/responses/create-responses)
- Endpoint: `POST https://openrouter.ai/api/v1/responses`
